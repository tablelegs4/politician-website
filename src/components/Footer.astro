---
// フッターコンポーネント
import profile from '../data/profile.json';
const currentYear = new Date().getFullYear();

// URLパラメータを保持する関数
const themeParam = Astro.url.searchParams.get('theme');
const themeQuery = themeParam ? `?theme=${themeParam}` : '';

// ベースパスを適用したパスを生成する関数
const baseUrl = import.meta.env.BASE_URL || '/';
const withBase = (path: string) => {
  if (path.startsWith('http://') || path.startsWith('https://') || path.startsWith('//')) {
    return path;
  }
  const base = baseUrl.endsWith('/') ? baseUrl.slice(0, -1) : baseUrl;
  const cleanPath = path.startsWith('/') ? path : `/${path}`;
  return `${base}${cleanPath}${themeQuery}`;
};
---

<footer class="site-footer">
  <div class="container">
    <div class="footer-content">
      <!-- メインナビゲーション（TOPページセクションへのアンカーリンク） -->
      <nav class="footer-nav footer-nav-main" aria-label="フッターナビゲーション">
        <ul>
          <li><a href={withBase('/#top')}>ホーム</a></li>
          <li><a href={withBase('/#policy')}>政策</a></li>
          <li><a href={withBase('/#message')}>魂のメッセージ</a></li>
          <li><a href={withBase('/#profile')}>プロフィール</a></li>
          <li><a href={withBase('/#activity')}>活動報告</a></li>
          <li><a href={withBase('/#faq')}>よくある質問</a></li>
          <li><a href={withBase('/#support')}>応援する</a></li>
          <li><a href={withBase('/contact/')}>お問い合わせ</a></li>
        </ul>
      </nav>

      <!-- サブナビゲーション（ポリシー系） -->
      <nav class="footer-nav footer-nav-sub" aria-label="ポリシー">
        <ul>
          <li><a href={withBase('/privacy/')}>プライバシーポリシー</a></li>
          <li><a href={withBase('/site-policy/')}>サイトポリシー</a></li>
        </ul>
      </nav>

      <p class="copyright">&copy; {currentYear} {profile.name}. All rights reserved.</p>
    </div>
  </div>
</footer>
