---
import Layout from '../../layouts/Layout.astro';
import { getThemeFromUrl } from '../../config/theme';
import { getSiteConfig } from '../../utils/content';

// URLパラメータからテーマを取得
const currentTheme = getThemeFromUrl(Astro.url);

// サイト設定を取得
const siteConfig = getSiteConfig();

// テーマに応じた政策ページコンポーネントを動的にインポート
const PolicyPage = currentTheme === 'modern'
  ? (await import('../../themes/modern/pages/PolicyPage.astro')).default
  : (await import('../../themes/default/pages/PolicyPage.astro')).default;

// テーマに応じたCSSをインポート
const themeStyles = currentTheme === 'modern'
  ? (await import('../../themes/modern/styles/theme.css?raw')).default
  : (await import('../../themes/default/styles/theme.css?raw')).default;
---

<Layout
  title="政策"
  description={`${siteConfig.politician.name}の政策一覧。重点政策と全ての政策をご紹介します。`}
>
  <style is:global set:html={themeStyles}></style>
  <PolicyPage />
</Layout>
