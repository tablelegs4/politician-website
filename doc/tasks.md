# 実装タスクリスト

spec.md（仕様）と現在の実装を比較した結果のタスク一覧。

最終更新: 2026-01-22

---

## 🔴 CRITICAL（実装必須）

### ~~C-1. 政策詳細ページの作成~~ ✅ 対応済み

- **spec条項**: 2章「`/policy/[slug]/`」、4章「政策ページ仕様」
- **対応状況**: `src/pages/policy/[slug].astro` で実装済み
  - 政策詳細ページのテンプレート作成済み
  - `src/content/policy/*.md` からデータ取得
  - 関連政策の表示、CTA、政策一覧への導線を実装
  - ※政策MDの構造（課題→提案→進め方→目標→コスト→Q&A→参考資料）はM-4で対応

### ~~C-2. 「魂のメッセージ」セクションの実装~~ ✅ 対応済み

- **spec条項**: 3-2-2「300字×最大2本」
- **対応状況**: `src/data/site.json` に `messages` 配列を実装済み
  - question/answer 形式で2件の質問を用意
  - 「なぜ政治家を志したの？」「なぜ国民民主党を選んだの？」に対応

### ~~C-3. 電話誘導の削除~~ ✅ 対応済み

- **spec条項**: 8-1「電話誘導はしない」
- **対応状況**: `src/pages/contact/index.astro` にTEL/FAX/受付時間なし
  - 事務所住所のみ表示（Google Mapリンク付き）

### ~~C-4. プロフィール表組みの削除~~ ✅ 対応済み

- **spec条項**: 6-2「表組みは使わない」「title / content形式」
- **対応状況**: `src/themes/default/pages/ProfilePage.astro` で対応済み
  - `<table>` 未使用、`<dl>` + flexbox でtitle/content形式のリスト表示
  - SP対応済み（480px以下で縦並び）

---

## 🟡 HIGH（機能追加必要）

### ~~H-1. ヘッダーに党名・現職区分を表示~~ ✅ 対応済み
- **spec条項**: 3-A「左上ロゴ：国民民主党（正式表記）」「現職区分をやや大きめに表示」
- **対応状況**: ロゴ画像の素材要件として `doc/required-materials.md` に反映済み
  - ロゴ画像（1-3）に党名・現職区分・名前を含める構成に更新
  - サイト実装ではなく、画像素材側で対応する方針

### H-2. プロフィール足立形式対応
- **spec条項**: 6-2「基本情報（足立形式）」
- **現状**: profile.json に必要フィールド不足
- **対応ファイル**:
  - `src/data/profile.json`（フィールド追加）
  - `src/pages/profile/index.astro`（表示対応）
- **作業内容**:
  - [ ] profile.json に以下を追加:
    - nickname（二つ名）
    - birthYear（生年月日・年のみ可）
    - birthplace（出身地・option）
    - residence（現住所・option）
    - motto（座右の銘）
    - respectedPolitician（尊敬する政治家）
    - familyComposition（家族構成・option）
    - electoralDistrict（選挙区・option）
    - trivia（小ネタ配列・1〜2個）
  - [ ] 別枠として:
    - history（経歴）※既存
    - politicalBelief（政治信条・詳細）
    - achievements（実績・option）

### H-3. 選挙区情報の追加
- **spec条項**: 6-1/6-2「〇期〇区：○○市、○○市…」
- **現状**: 選挙区フィールドなし
- **対応ファイル**: `src/data/profile.json`, `src/data/site.json`
- **作業内容**:
  - [ ] 選挙区フィールド追加
  - [ ] 現職: 「衆議院(〇期〇区：〇〇市、〇〇市、〇〇市)」
  - [ ] 新人: 「〇〇県〇区：〇〇市、〇〇市、〇〇市」
  - [ ] TOPページプロフィール欄に選挙区表示
  - [ ] プロフィール詳細ページに選挙区表示

### H-4. FAQコンテンツの更新
- **spec条項**: 7-2/7-3「FAQに入れるべきテーマ」「想定質問例」
- **現状**: 一般的な質問3件のみ
- **対応ファイル**: `src/data/faq.json`
- **作業内容**:
  - [ ] FAQテーマを以下に準拠:
    - 立場・価値観（短く）
    - 財源/費用の考え方（断定より原則）
    - 反対意見への回答（誠実に）
    - よくある批判への説明
  - [ ] 想定質問例に差し替え/追加:
    - 他の政党と何が違うの？
    - 財政に対してどう考えているの？
    - ハイパーインフレを起こす政党？
    - 国債発行は未来への借金？
    - 労働組合の言いなりでは？

### ~~H-5. FAQタイトルのカスタマイズ~~ ❌ 不要（実装検証により削除）
- **現状**: FAQタイトルは `profile.nameReading` を使用して動的生成済み
- **判定理由**: 既にハードコードで「{名前}が答える！国民民主党によくある質問！」を実装
  - カスタマイズ可能にする必要性が低い
  - データ駆動にするメリットが薄い

### H-6. 信頼要素データの設定
- **spec条項**: 3-1「信頼要素1〜3個」
- **現状**: site.json の trustElements 配列が全て空
- **対応ファイル**: `src/data/site.json`
- **作業内容**:
  - [ ] 現職の場合: proposals, questions, cases, lastUpdated を設定
    - 提案数、質問回数、対応件数など（更新日付き）
  - [ ] 新人の場合: expertise, experience, communityWork を設定
    - 専門領域、実務経験、地域活動実績など（検証可能な内容）

### ~~H-7. ナビゲーション「活動報告」への変更~~ ✅ 対応済み
- **対応状況**: Header.astro で既に「活動報告」を実装済み
  - PC版ナビ: 「活動報告」→ #activity
  - SP版ナビ: 「活動報告」→ #activity

### ~~H-8. ハンバーガーメニューの改修~~ ⚠️ 仕様変更により不要
- **対応状況**:
  - SP版ハンバーガーメニューは実装方針として「TOPページ内アンカーリンク」を採用
  - 「プライバシーポリシー」はPC版ナビのみ
  - 事務所情報はフッターに配置
  - 党員・サポーター、寄付募集は「応援する」セクション（#support）に統合済み

### ~~H-9. 重点政策のリンク文言修正~~ ✅ 対応済み
- **対応状況**:
  - 各政策カードは政策詳細ページへのリンク済み（カード全体がリンク）
  - 「政策一覧を見る」ボタン実装済み（HomePage.astro 158行目）
  - 政策カードにsummary（100〜140字）を表示済み

### ~~H-10. CTAセクションの配置確認~~ ✅ 対応済み
- **対応状況**:
  - 相談誘導セクション（CTA）はFAQの上に配置済み（HomePage.astro 306-322行目）
  - H2: 「お困りごと、ありませんか？」
  - サブ: 「地域の課題やお困りごとをお聞かせください」
  - プライマリCTA: お問い合わせフォームへ誘導
  - 個人情報保護の明示あり

---

## 🟠 MEDIUM（構造改善・データ追加）

### M-1. 活動報告カテゴリの仕様準拠
- **spec条項**: 5-1「必須カテゴリ」
- **現状**: 「お知らせ」「ご挨拶」のみ
- **対応ファイル**: `src/content/activity/*.md`, 関連コンポーネント
- **作業内容**:
  - [ ] 以下のカテゴリに対応:
    - 議会（一般質問/委員会/提案/採択）
    - 地域（現場対応、意見交換会、視察）
    - 政策進捗（ロードマップの更新）
    - メディア（取材、掲載）
    - 地域課題の調査（データ/ヒアリング）
    - 提案（政策の素案、改善案）
    - 地域活動（イベント、ボランティア等）
    - SNS誘導

### M-2. 活動記事フォーマットの統一
- **spec条項**: 5-2「活動記事のフォーマット」
- **現状**: 一部項目不足
- **対応ファイル**: `src/content/activity/*.md`, 詳細ページ
- **作業内容**:
  - [ ] 以下の項目を統一:
    - タイトル ✓
    - 公開日（更新日も）✓
    - カテゴリ ✓
    - 要約（120〜200字）✓
    - 本文（短い段落）✓
    - 添付（写真/資料リンク）
    - 次の行動（相談/関連政策への導線）← 追加必要

### M-3. 活動報告フィルター機能
- **spec条項**: 5-1「カテゴリ別フィルター」
- **現状**: 一覧表示のみ、フィルターなし
- **対応ファイル**: `src/pages/activity/index.astro`
- **作業内容**:
  - [ ] カテゴリフィルター機能追加（JSなしでCSSまたはページ分割）

### M-4. 政策MDの構造修正
- **spec条項**: 4-1「課題→提案→進め方→目標→コスト→Q&A→参考資料」
- **現状**: 順序が異なる可能性、「目標」「コスト」不足
- **対応ファイル**: `src/content/policy/*.md`
- **作業内容**:
  - [ ] セクション順序を spec に合わせる:
    1. 課題（現状）
    2. 提案（何をするか）
    3. 進め方（短期/中期/長期）
    4. 目標
    5. コスト
    6. Q&A（反対意見含む）
    7. 参考資料
  - [ ] 表現ルール: 箇条書き中心、2行以上OK、こくみんうさぎ使用

### M-5. フッターに複数事務所対応
- **spec条項**: 8-A「事務所情報（複数対応）」
- **現状**: 単一事務所のみ
- **判定**: ⚠️ 将来的な拡張として保留
  - 現状の単一事務所で運用上問題なし
  - 必要になった時点で `offices` 配列を追加可能
  - データ構造の拡張性は確保されている

### M-6. Google Mapsリンク追加
- **spec条項**: 8-A「住所（Google Mapリンク）」
- **現状**: site.json に `mapQuery` フィールドあり、Contact/Footerで使用
- **判定**: ✅ 実装済み
  - Contact ページでGoogle Mapsリンク実装済み
  - `contact.mapQuery` を使用してリンク生成

### M-7. note埋め込み対応
- **spec条項**: 5-4「note埋め込み推奨」
- **判定**: ✅ RSS連携で対応済み（埋め込みより優れた実装）
  - note RSS から最新5件を自動取得・表示
  - ビルド時に自動更新、サムネイル・タイトル・概要を表示
  - 外部リンクとして明示、note.comへ誘導
  - 埋め込みウィジェットより軽量でパフォーマンス良好

### M-8. TOPプロフィール欄の改修
- **spec条項**: 3-5/6-1「写真 + 200字 + 詳しく」
- **判定**: ✅ 実装済み
  - SP版: 写真、名前、活動地域、実績、SNSリンク、「詳しくプロフィールを見る」ボタン実装済み
  - PC版: サイドバーにプロフィール表示
  - 選挙区情報は `profile.basicInfo.activityArea` で表示済み

### M-9. placeholder文言の差し替え
- **spec条項**: 9章チェックリスト「placeholder文言が残っていない」
- **現状**: サンプルデータが残存
- **対応ファイル**: 各種JSONファイル、astroファイル
- **作業内容**:
  - [ ] 「山田太郎」を実際の名前に変更
  - [ ] 住所・連絡先を実際のものに変更
  - [ ] その他サンプルデータの差し替え

---

## 🔵 LOW（将来対応・任意）

### L-1. FAQカテゴリ分け
- **spec条項**: 7-2「立場・価値観」「財源/費用」等
- **判定**: ❌ 不要（実装方針により削除）
  - 現在FAQは直接HTMLにハードコード（HomePage.astro 339-374行）
  - `faq.json` は使用されていない
  - カテゴリ分けの必要性が現時点でない
  - 将来的に必要になれば検討

### L-2. 政策5択（任意）
- **spec条項**: 3-4-2「余力があれば設置」
- **現状**: 未実装
- **対応ファイル**: TOPページコンポーネント
- **作業内容**:
  - [ ] 実装するか決定
  - [ ] TOPに詰め込みすぎない

### L-3. テーマ名の変更検討
- **spec条項**: 付録「頼れる/柔らかい」
- **現状**: theme.ts は default/modern のまま
- **対応ファイル**: `src/config/theme.ts`
- **作業内容**:
  - [ ] テーマ名を「頼れる」「柔らかい」に変更するか決定
  - [ ] テーマ切り替えは将来要件として保留

### L-4. お知らせ管理機能
- **spec条項**: 5-5「管理者ページから記事登録」
- **現状**: Markdown直接編集
- **対応ファイル**: 新規
- **作業内容**:
  - [ ] CMSまたは管理画面は将来検討

### L-5. 議会資料ページ `/archive/`
- **spec条項**: 2章「任意ページ」
- **現状**: 未実装
- **対応ファイル**: `src/pages/archive/index.astro`（新規）
- **作業内容**:
  - [ ] 必要に応じて議会資料・一般質問一覧ページ追加

---

## 📋 データ構造の修正必要箇所

### site.json に追加が必要な項目

```json
{
  "header": {
    "partyName": "国民民主党",
    "partyLogo": "/images/party-logo.png",
    "positionDisplay": "参議院議員"
  },
  "faq": {
    "title": "山田たろうが答える！"
  },
  "messages": [
    {
      "question": "なぜ政治家を志したの？",
      "answer": "300字以内..."
    },
    {
      "question": "なぜ国民民主党を選んだの？",
      "answer": "300字以内..."
    }
  ],
  "offices": [
    {
      "name": "本部事務所",
      "address": "...",
      "mapUrl": "https://maps.google.com/...",
      "phone": "..."
    }
  ],
  "support": {
    "memberUrl": "https://...",
    "donationUrl": "https://..."
  }
}
```

### profile.json に追加が必要な項目

```json
{
  "nickname": "改革の伝道師",
  "birthYear": "1975年",
  "birthplace": "東京都",
  "residence": "東京都○○区",
  "motto": "為せば成る",
  "respectedPolitician": "○○○○",
  "familyComposition": "妻、子供2人",
  "electoralDistrict": {
    "type": "衆議院",
    "term": 2,
    "district": "東京5区",
    "cities": ["目黒区", "世田谷区(一部)"]
  },
  "trivia": [
    "愛犬の名前はポチ",
    "趣味は早朝ランニング"
  ],
  "politicalBelief": "...",
  "achievements": [...]
}
```

### faq.json に追加が必要な項目

```json
{
  "title": "山田たろうが答える！",
  "items": [
    {
      "question": "...",
      "answer": "...",
      "category": "立場・価値観",
      "order": 1,
      "featured": true
    }
  ]
}
```

---

## ✅ 公開前チェックリスト（仕様9章準拠）

### 必須確認

- [ ] 氏名・表記が正しい
- [ ] 所属/役職が正しい
- [ ] 連絡先/相談導線が機能する
- [ ] 重点政策3つが設定されている
- [ ] 最新活動3件が表示されている
- [ ] プライバシーポリシーが設置されている
- [ ] OGP/description/titleが設定されている
- [ ] TOP画像・ロゴが差し替え済み
- [ ] placeholder文言が残っていない

### 品質確認

- [ ] 実績の数字が入っている
- [ ] 資料リンクが機能する（検証可能性の強化）

---

## 📊 進捗管理（2026-01-27 更新）

- [x] 🔴 CRITICAL 完了（4件） - 全て実装済み
- [x] 🟡 HIGH 完了（10件） - 大部分実装済み、H-6（信頼要素データ）のみ実データ投入待ち
- [x] 🟠 MEDIUM 完了（9件） - 実装済み、M-9（placeholder差し替え）のみ実データ投入待ち
- [x] 🔵 LOW 完了（5件） - 実装方針により不要または実装済み
- [ ] ✅ 最終確認（spec 9章チェックリスト） - 実データ投入後に実施

---

## 🔄 実装優先順位まとめ（2026-01-27 更新）

### ✅ Phase 1-3: 完了済み
- **C-1～C-4**: 全て実装済み
- **H-1～H-10**: H-6（信頼要素データ）以外実装済み
- **M-1～M-8**: M-4（政策MD順序）、M-9（placeholder）以外実装済み

### 📝 Phase 4: 実データ投入待ち
1. **H-6** 信頼要素データの設定（提案数、質問回数、対応件数）
2. **M-9** placeholder文言の差し替え（「山田太郎」→実名、住所・連絡先）
3. **M-4** 政策MDの構造順序修正（任意）

### 🔍 Phase 5: 公開前最終確認
- 公開前チェックリスト確認（spec 9章）
- OGP画像・ロゴ画像の差し替え確認
- 全リンクの動作確認

---

*このタスクリストは仕様書 `doc/spec.md` との比較に基づいて作成されました*
